{% extends "base.html" %}

{% block content %}
  <div class="mainBaseFilter">
    <!-- BotÃ³n para abrir modal de filtros -->
    <button class="btn" data-bs-toggle="modal" data-bs-target="#filtersModal">
        <i class="bi bi-funnel"></i> Filtros
    </button>
  </div>
  <!-- Incluye el modal de filtros -->
  {% include "partials/filtros_modal.html" %}

  <!-- Contenido de cada pÃ¡gina que use filtros -->
  <div id="main-filter-content">
      {% block filter_content %}{% endblock %}
  </div>

  <script>
    document.addEventListener("filters:apply", function (event) {
      const filters = event.detail;
      console.log("ðŸ“¦ Filtros aplicados (capturados en basefilter):", filters);

      // Despacha globalmente el evento para invoiced.html
      const newEvent = new CustomEvent("filters:ready", { detail: filters });
      document.dispatchEvent(newEvent);
    });
  </script>
{% endblock %}